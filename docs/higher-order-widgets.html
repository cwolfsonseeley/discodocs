<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Documentation for discoveryengine</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Some documentation for the discoveryengine">
  <meta name="generator" content="bookdown 0.1.3 and GitBook 2.6.7">

  <meta property="og:title" content="Documentation for discoveryengine" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Some documentation for the discoveryengine" />
  <meta name="github-repo" content="tarakc02/discodocs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Documentation for discoveryengine" />
  
  <meta name="twitter:description" content="Some documentation for the discoveryengine" />
  

<meta name="author" content="Tarak Shah">

<meta name="date" content="2016-09-14">


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="the-brainstorm-bot.html">
<link rel="next" href="non-entity-widgets.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.7/htmlwidgets.js"></script>
<script src="libs/datatables-binding-0.2/datatables.js"></script>
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.12/js/jquery.dataTables.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Documentation for the discoveryengine</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Disco</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#contribute-to-the-disco-engine"><i class="fa fa-check"></i><b>1.1</b> Contribute to the Disco Engine</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#contribute-to-this-documentation"><i class="fa fa-check"></i><b>1.2</b> Contribute to this documentation</a></li>
</ul></li>
<li class="part"><span><b>Preliminaries</b></span></li>
<li class="chapter" data-level="2" data-path="r-intro.html"><a href="r-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to R and RStudio</a></li>
<li class="chapter" data-level="3" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>3</b> Installation</a><ul>
<li class="chapter" data-level="3.1" data-path="installation.html"><a href="installation.html#required-packages"><i class="fa fa-check"></i><b>3.1</b> Required packages</a></li>
<li class="chapter" data-level="3.2" data-path="installation.html"><a href="installation.html#a-disco-test"><i class="fa fa-check"></i><b>3.2</b> A disco test</a></li>
</ul></li>
<li class="part"><span><b>Basics</b></span></li>
<li class="chapter" data-level="4" data-path="intro-example.html"><a href="intro-example.html"><i class="fa fa-check"></i><b>4</b> An introductory example</a><ul>
<li class="chapter" data-level="4.1" data-path="intro-example.html"><a href="intro-example.html#develop-a-strategy"><i class="fa fa-check"></i><b>4.1</b> Develop a strategy</a></li>
<li class="chapter" data-level="4.2" data-path="intro-example.html"><a href="intro-example.html#intro-example-create-def"><i class="fa fa-check"></i><b>4.2</b> Create the definition</a></li>
<li class="chapter" data-level="4.3" data-path="intro-example.html"><a href="intro-example.html#send-the-definition-to-the-cdw"><i class="fa fa-check"></i><b>4.3</b> Send the definition to the CDW</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-with-widgets.html"><a href="working-with-widgets.html"><i class="fa fa-check"></i><b>5</b> Working with widgets</a><ul>
<li class="chapter" data-level="5.1" data-path="working-with-widgets.html"><a href="working-with-widgets.html#working-with-finding-widgets"><i class="fa fa-check"></i><b>5.1</b> Finding widgets</a></li>
<li class="chapter" data-level="5.2" data-path="working-with-widgets.html"><a href="working-with-widgets.html#codes-and-synonyms"><i class="fa fa-check"></i><b>5.2</b> Codes and synonyms</a></li>
<li class="chapter" data-level="5.3" data-path="working-with-widgets.html"><a href="working-with-widgets.html#synonym-search"><i class="fa fa-check"></i><b>5.3</b> Synonym search</a></li>
<li class="chapter" data-level="5.4" data-path="working-with-widgets.html"><a href="working-with-widgets.html#use-the-default-cases"><i class="fa fa-check"></i><b>5.4</b> Use the default cases</a></li>
<li class="chapter" data-level="5.5" data-path="working-with-widgets.html"><a href="working-with-widgets.html#detailed-controls"><i class="fa fa-check"></i><b>5.5</b> Detailed controls</a></li>
<li class="chapter" data-level="5.6" data-path="working-with-widgets.html"><a href="working-with-widgets.html#combining-widgets"><i class="fa fa-check"></i><b>5.6</b> Combining widgets</a></li>
<li class="chapter" data-level="5.7" data-path="working-with-widgets.html"><a href="working-with-widgets.html#combination-example"><i class="fa fa-check"></i><b>5.7</b> Combination example</a></li>
<li class="chapter" data-level="5.8" data-path="working-with-widgets.html"><a href="working-with-widgets.html#combination-example-2"><i class="fa fa-check"></i><b>5.8</b> Combination example 2</a></li>
</ul></li>
<li class="part"><span><b>Bots</b></span></li>
<li class="chapter" data-level="6" data-path="the-brainstorm-bot.html"><a href="the-brainstorm-bot.html"><i class="fa fa-check"></i><b>6</b> The Brainstorm Bot</a><ul>
<li class="chapter" data-level="6.1" data-path="the-brainstorm-bot.html"><a href="the-brainstorm-bot.html#search-features"><i class="fa fa-check"></i><b>6.1</b> Search features</a></li>
</ul></li>
<li class="part"><span><b>Advanced</b></span></li>
<li class="chapter" data-level="7" data-path="higher-order-widgets.html"><a href="higher-order-widgets.html"><i class="fa fa-check"></i><b>7</b> Higher order widgets</a><ul>
<li class="chapter" data-level="7.1" data-path="higher-order-widgets.html"><a href="higher-order-widgets.html#children-of-wealth"><i class="fa fa-check"></i><b>7.1</b> Children of wealth</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html"><i class="fa fa-check"></i><b>8</b> Non-entity widgets</a><ul>
<li class="chapter" data-level="8.1" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html#motivation"><i class="fa fa-check"></i><b>8.1</b> Motivation</a></li>
<li class="chapter" data-level="8.2" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html#non-entity-disco-definition-types"><i class="fa fa-check"></i><b>8.2</b> Disco Definition Types</a></li>
<li class="chapter" data-level="8.3" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html#searching-fund-text"><i class="fa fa-check"></i><b>8.3</b> Searching fund text</a></li>
<li class="chapter" data-level="8.4" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html#from-funds-to-entities"><i class="fa fa-check"></i><b>8.4</b> From funds to entities</a></li>
<li class="chapter" data-level="8.5" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html#non-entity-converters"><i class="fa fa-check"></i><b>8.5</b> “Converters”</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="test-cdw.html"><a href="test-cdw.html"><i class="fa fa-check"></i><b>A</b> Test your database set up</a><ul>
<li class="chapter" data-level="A.1" data-path="test-cdw.html"><a href="test-cdw.html#test-your-connection"><i class="fa fa-check"></i><b>A.1</b> Test your connection</a></li>
<li class="chapter" data-level="A.2" data-path="test-cdw.html"><a href="test-cdw.html#opening-rstudio"><i class="fa fa-check"></i><b>A.2</b> Opening RStudio</a></li>
<li class="chapter" data-level="A.3" data-path="test-cdw.html"><a href="test-cdw.html#installing-getcdw"><i class="fa fa-check"></i><b>A.3</b> Installing getcdw</a></li>
<li class="chapter" data-level="A.4" data-path="test-cdw.html"><a href="test-cdw.html#testing-getcdw"><i class="fa fa-check"></i><b>A.4</b> Testing getcdw</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Documentation for discoveryengine</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="higher-order-widgets" class="section level1">
<h1><span class="header-section-number">7</span> Higher order widgets</h1>
<p>You may have noticed when we ran the <code>show_widgets()</code> function in <a href="#working-with-show_widgets">working with widgets</a> that there is a mysterious “Order” column that categorizes widgets as either “first-order” or “second-order”. What’s that all about? In order to answer that, let’s take a look at another example.</p>
<div id="children-of-wealth" class="section level2">
<h2><span class="header-section-number">7.1</span> Children of wealth</h2>
<p>Many alumni in our database do not have capacity ratings, but come from wealthy families. This would be nice to be aware of if they were ever being solicited. But how could we identify these “children of wealth” using the discovery engine? It’s pretty easy to find wealthy individuals:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># as always, i make sure the disco engine is loaded</span>
<span class="kw">library</span>(discoveryengine)

<span class="co"># i&#39;ll define wealthy as a capacity of $1 Million+</span>
wealthy =<span class="st"> </span><span class="kw">has_capacity</span>(<span class="dv">1</span>:<span class="dv">7</span>)</code></pre></div>
<p>But now I’m stuck. I want to find children of anyone on that list. But so far all of the widgets we’ve seen work with specific codes, not other widgets. Technically, all the widgets we’ve seen are <em>first-order</em> widgets. But we do have some widgets that, instead of working on one or more specific codes, works on an existing, already filled out widget. <code>child_of</code> is one such <em>second-order</em> widget:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">child_of_wealth =<span class="st"> </span><span class="kw">child_of</span>(wealthy)
<span class="kw">display</span>(child_of_wealth)</code></pre></div>
<pre><code>## # A tibble: 1,024 x 1
##    entity_id
##        &lt;dbl&gt;
## 1     501819
## 2     633358
## 3    3009776
## 4     684446
## 5      30621
## 6     731797
## 7     325782
## 8     734035
## 9      31566
## 10     26435
## # ... with 1,014 more rows</code></pre>
<p>Though the syntax looks just like what we’ve been doing all along, note that <code>wealthy</code> in the above is not a code or synonym, but instead is the name that I gave to the definition <code>has_capacity(1:7)</code>. This makes <code>child_of</code> very different from other widgets we’ve seen so far. As we’ll see in the next seciton, the ability to use second-order widgets allows us to do some very powerful things.</p>
<p>The result of using a second-order widget, though, is just like using any other widget. You can continue to combine it with other widgets:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">display</span>(child_of_wealth %and%<span class="st"> </span><span class="kw">lives_in_msa</span>(san_francisco))</code></pre></div>
<pre><code>## # A tibble: 448 x 1
##    entity_id
##        &lt;dbl&gt;
## 1     501819
## 2     731797
## 3     325782
## 4     415779
## 5      30775
## 6      30776
## 7     459195
## 8      28210
## 9      21477
## 10    433145
## # ... with 438 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># or even</span>
<span class="kw">display</span>(
    <span class="kw">child_of</span>(child_of_wealth)
)</code></pre></div>
<pre><code>## # A tibble: 118 x 1
##    entity_id
##        &lt;dbl&gt;
## 1     684446
## 2    1002656
## 3     499074
## 4    3211635
## 5     945146
## 6     509691
## 7    3162983
## 8     734034
## 9     916909
## 10    742372
## # ... with 108 more rows</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-brainstorm-bot.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="non-entity-widgets.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tarakc02/discodocs/edit/master/40-higher-order.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"search": true
});
});
</script>

</body>

</html>

<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Documentation for discoveryengine</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Some documentation for the discoveryengine">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="Documentation for discoveryengine" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Some documentation for the discoveryengine" />
  <meta name="github-repo" content="tarakc02/discodocs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Documentation for discoveryengine" />
  
  <meta name="twitter:description" content="Some documentation for the discoveryengine" />
  

<meta name="author" content="Tarak Shah">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="higher-order-widgets.html">
<link rel="next" href="ex-political-economy.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.8/htmlwidgets.js"></script>
<script src="libs/datatables-binding-0.2/datatables.js"></script>
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.12/js/jquery.dataTables.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Documentation for the discoveryengine</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Disco</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#contribute-to-the-disco-engine"><i class="fa fa-check"></i><b>1.1</b> Contribute to the Disco Engine</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#contribute-to-this-documentation"><i class="fa fa-check"></i><b>1.2</b> Contribute to this documentation</a></li>
</ul></li>
<li class="part"><span><b>I Preliminaries</b></span></li>
<li class="chapter" data-level="2" data-path="r-intro.html"><a href="r-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to R and RStudio</a></li>
<li class="chapter" data-level="3" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>3</b> Installation</a><ul>
<li class="chapter" data-level="3.1" data-path="installation.html"><a href="installation.html#required-packages"><i class="fa fa-check"></i><b>3.1</b> Required packages</a></li>
<li class="chapter" data-level="3.2" data-path="installation.html"><a href="installation.html#a-disco-test"><i class="fa fa-check"></i><b>3.2</b> A disco test</a></li>
</ul></li>
<li class="part"><span><b>II Basics</b></span></li>
<li class="chapter" data-level="4" data-path="intro-example.html"><a href="intro-example.html"><i class="fa fa-check"></i><b>4</b> An introductory example</a><ul>
<li class="chapter" data-level="4.1" data-path="intro-example.html"><a href="intro-example.html#develop-a-strategy"><i class="fa fa-check"></i><b>4.1</b> Develop a strategy</a></li>
<li class="chapter" data-level="4.2" data-path="intro-example.html"><a href="intro-example.html#intro-example-create-def"><i class="fa fa-check"></i><b>4.2</b> Create the definition</a></li>
<li class="chapter" data-level="4.3" data-path="intro-example.html"><a href="intro-example.html#send-the-definition-to-the-cdw"><i class="fa fa-check"></i><b>4.3</b> Send the definition to the CDW</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-with-widgets.html"><a href="working-with-widgets.html"><i class="fa fa-check"></i><b>5</b> Working with widgets</a><ul>
<li class="chapter" data-level="5.1" data-path="working-with-widgets.html"><a href="working-with-widgets.html#working-with-finding-widgets"><i class="fa fa-check"></i><b>5.1</b> Finding widgets</a></li>
<li class="chapter" data-level="5.2" data-path="working-with-widgets.html"><a href="working-with-widgets.html#codes-and-synonyms"><i class="fa fa-check"></i><b>5.2</b> Codes and synonyms</a></li>
<li class="chapter" data-level="5.3" data-path="working-with-widgets.html"><a href="working-with-widgets.html#synonym-search"><i class="fa fa-check"></i><b>5.3</b> Synonym search</a></li>
<li class="chapter" data-level="5.4" data-path="working-with-widgets.html"><a href="working-with-widgets.html#use-defaults"><i class="fa fa-check"></i><b>5.4</b> Use the default cases</a></li>
<li class="chapter" data-level="5.5" data-path="working-with-widgets.html"><a href="working-with-widgets.html#detailed-controls"><i class="fa fa-check"></i><b>5.5</b> Detailed controls</a></li>
<li class="chapter" data-level="5.6" data-path="working-with-widgets.html"><a href="working-with-widgets.html#combining-widgets"><i class="fa fa-check"></i><b>5.6</b> Combining widgets</a></li>
<li class="chapter" data-level="5.7" data-path="working-with-widgets.html"><a href="working-with-widgets.html#combination-example"><i class="fa fa-check"></i><b>5.7</b> Combination example</a></li>
<li class="chapter" data-level="5.8" data-path="working-with-widgets.html"><a href="working-with-widgets.html#combination-example-2"><i class="fa fa-check"></i><b>5.8</b> Combination example 2</a></li>
</ul></li>
<li class="part"><span><b>III Bots</b></span></li>
<li class="chapter" data-level="6" data-path="brainstorm-bot.html"><a href="brainstorm-bot.html"><i class="fa fa-check"></i><b>6</b> The Brainstorm Bot</a><ul>
<li class="chapter" data-level="6.1" data-path="brainstorm-bot.html"><a href="brainstorm-bot.html#search-features"><i class="fa fa-check"></i><b>6.1</b> Search features</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="matrix-bot.html"><a href="matrix-bot.html"><i class="fa fa-check"></i><b>7</b> The Matrix Bot</a><ul>
<li class="chapter" data-level="7.1" data-path="matrix-bot.html"><a href="matrix-bot.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="matrix-bot.html"><a href="matrix-bot.html#what-it-is"><i class="fa fa-check"></i><b>7.2</b> What it is</a></li>
<li class="chapter" data-level="7.3" data-path="matrix-bot.html"><a href="matrix-bot.html#example"><i class="fa fa-check"></i><b>7.3</b> Example</a></li>
<li class="chapter" data-level="7.4" data-path="matrix-bot.html"><a href="matrix-bot.html#botstrapping"><i class="fa fa-check"></i><b>7.4</b> Botstrapping</a></li>
<li class="chapter" data-level="7.5" data-path="matrix-bot.html"><a href="matrix-bot.html#how-does-it-work"><i class="fa fa-check"></i><b>7.5</b> How does it work?</a></li>
</ul></li>
<li class="part"><span><b>IV Advanced</b></span></li>
<li class="chapter" data-level="8" data-path="optional-arguments.html"><a href="optional-arguments.html"><i class="fa fa-check"></i><b>8</b> Optional arguments</a><ul>
<li class="chapter" data-level="8.1" data-path="optional-arguments.html"><a href="optional-arguments.html#opt-events"><i class="fa fa-check"></i><b>8.1</b> Event invitees and attendees</a></li>
<li class="chapter" data-level="8.2" data-path="optional-arguments.html"><a href="optional-arguments.html#date-ranges"><i class="fa fa-check"></i><b>8.2</b> Date ranges</a></li>
<li class="chapter" data-level="8.3" data-path="optional-arguments.html"><a href="optional-arguments.html#graduate-undergraduate-attendee"><i class="fa fa-check"></i><b>8.3</b> Graduate, undergraduate, attendee</a></li>
<li class="chapter" data-level="8.4" data-path="optional-arguments.html"><a href="optional-arguments.html#workarounds-inactive-only"><i class="fa fa-check"></i><b>8.4</b> Workarounds: inactive only</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="higher-order-widgets.html"><a href="higher-order-widgets.html"><i class="fa fa-check"></i><b>9</b> Higher order widgets</a><ul>
<li class="chapter" data-level="9.1" data-path="higher-order-widgets.html"><a href="higher-order-widgets.html#children-of-wealth"><i class="fa fa-check"></i><b>9.1</b> Children of wealth</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html"><i class="fa fa-check"></i><b>10</b> Non-entity widgets</a><ul>
<li class="chapter" data-level="10.1" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html#motivation"><i class="fa fa-check"></i><b>10.1</b> Motivation</a></li>
<li class="chapter" data-level="10.2" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html#non-entity-disco-definition-types"><i class="fa fa-check"></i><b>10.2</b> Disco Definition Types</a></li>
<li class="chapter" data-level="10.3" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html#searching-fund-text"><i class="fa fa-check"></i><b>10.3</b> Searching fund text</a></li>
<li class="chapter" data-level="10.4" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html#from-funds-to-entities"><i class="fa fa-check"></i><b>10.4</b> From funds to entities</a></li>
<li class="chapter" data-level="10.5" data-path="non-entity-widgets.html"><a href="non-entity-widgets.html#non-entity-converters"><i class="fa fa-check"></i><b>10.5</b> “Converters”</a></li>
</ul></li>
<li class="part"><span><b>V Examples</b></span></li>
<li class="chapter" data-level="11" data-path="ex-political-economy.html"><a href="ex-political-economy.html"><i class="fa fa-check"></i><b>11</b> Political economy list</a></li>
<li class="chapter" data-level="12" data-path="ex-lybunt.html"><a href="ex-lybunt.html"><i class="fa fa-check"></i><b>12</b> LYBUNTs</a></li>
<li class="chapter" data-level="13" data-path="ex-recent-band-parents.html"><a href="ex-recent-band-parents.html"><i class="fa fa-check"></i><b>13</b> Recent Band Parents</a><ul>
<li class="chapter" data-level="13.1" data-path="ex-recent-band-parents.html"><a href="ex-recent-band-parents.html#recent-band-members"><i class="fa fa-check"></i><b>13.1</b> Recent band members</a></li>
<li class="chapter" data-level="13.2" data-path="ex-recent-band-parents.html"><a href="ex-recent-band-parents.html#find-their-parents"><i class="fa fa-check"></i><b>13.2</b> Find their parents</a></li>
<li class="chapter" data-level="13.3" data-path="ex-recent-band-parents.html"><a href="ex-recent-band-parents.html#who-live-close-enough"><i class="fa fa-check"></i><b>13.3</b> Who live close enough</a></li>
<li class="chapter" data-level="13.4" data-path="ex-recent-band-parents.html"><a href="ex-recent-band-parents.html#how-many"><i class="fa fa-check"></i><b>13.4</b> How many?</a></li>
<li class="chapter" data-level="13.5" data-path="ex-recent-band-parents.html"><a href="ex-recent-band-parents.html#householding"><i class="fa fa-check"></i><b>13.5</b> Householding</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="ex-near-builder.html"><a href="ex-near-builder.html"><i class="fa fa-check"></i><b>14</b> Nearing Builder of Berkeley Status</a><ul>
<li class="chapter" data-level="14.1" data-path="ex-near-builder.html"><a href="ex-near-builder.html#defining-close"><i class="fa fa-check"></i><b>14.1</b> Defining close</a></li>
<li class="chapter" data-level="14.2" data-path="ex-near-builder.html"><a href="ex-near-builder.html#householding-1"><i class="fa fa-check"></i><b>14.2</b> Householding</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="ex-sim-donors.html"><a href="ex-sim-donors.html"><i class="fa fa-check"></i><b>15</b> Donors who aren’t degreeholders</a><ul>
<li class="chapter" data-level="15.1" data-path="ex-sim-donors.html"><a href="ex-sim-donors.html#why-it-works"><i class="fa fa-check"></i><b>15.1</b> Why it works</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="test-cdw.html"><a href="test-cdw.html"><i class="fa fa-check"></i><b>A</b> Test your database set up</a><ul>
<li class="chapter" data-level="A.1" data-path="test-cdw.html"><a href="test-cdw.html#test-your-connection"><i class="fa fa-check"></i><b>A.1</b> Test your connection</a></li>
<li class="chapter" data-level="A.2" data-path="test-cdw.html"><a href="test-cdw.html#opening-rstudio"><i class="fa fa-check"></i><b>A.2</b> Opening RStudio</a></li>
<li class="chapter" data-level="A.3" data-path="test-cdw.html"><a href="test-cdw.html#fixing-the-default-package-installation-directory"><i class="fa fa-check"></i><b>A.3</b> Fixing the default package installation directory</a></li>
<li class="chapter" data-level="A.4" data-path="test-cdw.html"><a href="test-cdw.html#installing-getcdw"><i class="fa fa-check"></i><b>A.4</b> Installing getcdw</a></li>
<li class="chapter" data-level="A.5" data-path="test-cdw.html"><a href="test-cdw.html#testing-getcdw"><i class="fa fa-check"></i><b>A.5</b> Testing getcdw</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="cheat-sheet.html"><a href="cheat-sheet.html"><i class="fa fa-check"></i><b>B</b> Cheat Sheet</a><ul>
<li class="chapter" data-level="B.1" data-path="cheat-sheet.html"><a href="cheat-sheet.html#getting-started"><i class="fa fa-check"></i><b>B.1</b> Getting started</a></li>
<li class="chapter" data-level="B.2" data-path="cheat-sheet.html"><a href="cheat-sheet.html#knowing-about-defaults"><i class="fa fa-check"></i><b>B.2</b> Knowing about defaults</a></li>
<li class="chapter" data-level="B.3" data-path="cheat-sheet.html"><a href="cheat-sheet.html#output"><i class="fa fa-check"></i><b>B.3</b> Output</a></li>
<li class="chapter" data-level="B.4" data-path="cheat-sheet.html"><a href="cheat-sheet.html#code-lookup"><i class="fa fa-check"></i><b>B.4</b> Code lookup</a></li>
<li class="chapter" data-level="B.5" data-path="cheat-sheet.html"><a href="cheat-sheet.html#the-best-widgets-for-.-.-."><i class="fa fa-check"></i><b>B.5</b> The best widgets for . . .</a></li>
<li class="chapter" data-level="B.6" data-path="cheat-sheet.html"><a href="cheat-sheet.html#text-search"><i class="fa fa-check"></i><b>B.6</b> Text search</a></li>
<li class="chapter" data-level="B.7" data-path="cheat-sheet.html"><a href="cheat-sheet.html#other"><i class="fa fa-check"></i><b>B.7</b> Other</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Documentation for discoveryengine</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="non-entity-widgets" class="section level1">
<h1><span class="header-section-number">10</span> Non-entity widgets</h1>
<div id="motivation" class="section level2">
<h2><span class="header-section-number">10.1</span> Motivation</h2>
<p>In CADSmart, there is a report called the Fundfinder, which allows you to search for allocations that contain specific words or phrases in the name, fund terms, or fund biography. A natural application is to use the report to find some allocations, and then turn around and get a list of entities who have given to those funds. So far, we haven’t seen how to do that in the disco engine, but that’s about to change. Before reading this section, make sure you understand <a href="higher-order-widgets.html#higher-order-widgets">higher order widgets</a>.</p>
</div>
<div id="non-entity-disco-definition-types" class="section level2">
<h2><span class="header-section-number">10.2</span> Disco Definition Types</h2>
<p>Let’s take a closer look at a widget we’ve already used a lot, the <code>has_capacity</code> widget. In particular, let’s look at the <a href="intro-example.html#intro-example-create-def">definition</a> that gets created when we use <code>has_capacity</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">has_capacity</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## LISTBUILDER DEFINITION (type: entity_id)
## .   source: d_entity_mv.entity_id (entity_id)
## .   logic: capacity_rating_code IN 1</code></pre>
<p>See in parentheses in the first line where it says <code>type: entity_id</code>? So <code>entity_id</code> is the “type” of the definition we’ve created. And as you may have guessed by now, we can also create other types of definition!</p>
</div>
<div id="searching-fund-text" class="section level2">
<h2><span class="header-section-number">10.3</span> Searching fund text</h2>
<p>The Fundfinder report does not give you a list of entities, it gives you a list of allocations. You are then expected to use a different report to find donors to those allocations. We’ll follow a similar (but hopefully more convenient) strategy with the disco engine. We start by using <code>fund_text_contains</code> to do a text search of fund terms/biographies/names (for more info, check the help file by typing <code>?fund_text_contains</code>). <code>fund_text_contains</code>, like all text-searching tools in the discoveryengine, allows you to enter as many search terms as you like, and to use wildcards (*):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># let&#39;s look for funds that support diversity/underrepresented students</span>
diversity_funds =<span class="st"> </span><span class="kw">fund_text_contains</span>(<span class="st">&quot;divers*&quot;</span>, <span class="st">&quot;underrepresented&quot;</span>)</code></pre></div>
<p>The definition looks pretty complex, but notice that first line – this time around, instead of entity_id, we have <code>type: allocation_code</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">diversity_funds</code></pre></div>
<pre><code>## LISTBUILDER DEFINITION (type: allocation_code)
## .   operator (OI64): union
## .   left (OI64): 
## .   .   source: f_allocation_mv.allocation_code (allocation_code)
## .   .   logic: REGEXP_LIKE(long_name, &#39;((^|\\s|\\W)divers)|((^|\\s|\\W)underrepresented($|\\s|\\W))&#39;, &#39;i&#39;)
## .   right (OI64): 
## .   .   operator (IA60): union
## .   .   left (IA60): 
## .   .   .   operator (RJ90): union
## .   .   .   left (RJ90): 
## .   .   .   .   source: f_notes_mv.allocation_code (allocation_code)
## .   .   .   .   logic: 
## .   .   .   .   .   REGEXP_LIKE(description, &#39;((^|\\s|\\W)divers)|((^|\\s|\\W)underrepresented($|\\s|\\W))&#39;, &#39;i&#39;)
## .   .   .   .   .   note_type IN (&#39;FT&#39;, &#39;FB&#39;)
## .   .   .   right (RJ90): 
## .   .   .   .   source: f_notes_mv.allocation_code (allocation_code)
## .   .   .   .   logic: 
## .   .   .   .   .   REGEXP_LIKE(brief_note, &#39;((^|\\s|\\W)divers)|((^|\\s|\\W)underrepresented($|\\s|\\W))&#39;, &#39;i&#39;)
## .   .   .   .   .   note_type IN (&#39;FT&#39;, &#39;FB&#39;)
## .   .   right (IA60): 
## .   .   .   source: f_notes_mv.allocation_code (allocation_code)
## .   .   .   logic: 
## .   .   .   .   REGEXP_LIKE(note_text, &#39;((^|\\s|\\W)divers)|((^|\\s|\\W)underrepresented($|\\s|\\W))&#39;, &#39;i&#39;)
## .   .   .   .   note_type IN (&#39;FT&#39;, &#39;FB&#39;)</code></pre>
<p>And in fact, if we run <code>display</code>, we’ll see a list of allocation codes instead of the entity IDs that we’ve seen in previous examples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">display</span>(diversity_funds)</code></pre></div>
<pre><code>## # A tibble: 208 x 1
##    allocation_code
##              &lt;chr&gt;
## 1        FB0807000
## 2        FM8294000
## 3        FN1251000
## 4        FN1252000
## 5        FN1271000
## 6        FN1286000
## 7        FN1551000
## 8        FN3235000
## 9        FN3251000
## 10       FN3252000
## # ... with 198 more rows</code></pre>
</div>
<div id="from-funds-to-entities" class="section level2">
<h2><span class="header-section-number">10.4</span> From funds to entities</h2>
<p>If all you needed to do was get a list of allocation codes for your own research, then congrats, you’re done! But what if you want to take the next step, and find donors to those funds? You use one of the <a href="working-with-widgets.html#working-with-finding-widgets">tools to find widgets</a> to discover the <code>gave_to_fund</code> widget (read more at <code>?gave_to_fund</code>). Though it looks on the surface pretty similar to <code>gave_to_area</code> and <code>gave_to_department</code>, it is in fact one of those <a href="higher-order-widgets.html#higher-order-widgets">second-order widgets</a>!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># gave_to_fund has the same interface/options </span>
<span class="co"># as gave_to_area and gave_to_department. </span>
diversity_donors =<span class="st"> </span><span class="kw">gave_to_fund</span>(diversity_funds, <span class="dt">at_least =</span> <span class="dv">10000</span>,
                                <span class="dt">from =</span> <span class="dv">20150101</span>, <span class="dt">to =</span> <span class="dv">20151231</span>)
<span class="kw">display</span>(diversity_donors)</code></pre></div>
<pre><code>## # A tibble: 27 x 1
##    entity_id
##        &lt;dbl&gt;
## 1        867
## 2      10469
## 3      12100
## 4      16607
## 5      21393
## 6      22653
## 7      23207
## 8      24473
## 9      27771
## 10     28097
## # ... with 17 more rows</code></pre>
</div>
<div id="non-entity-converters" class="section level2">
<h2><span class="header-section-number">10.5</span> “Converters”</h2>
<p>Examples like this one show how higher-order widgets can act as “converters,” converting one type of definition (like <code>allocation_code</code>) to another (like <code>entity_id</code>). This is a handy idea to have in the back of your mind. If you find yourself with an ID list definition that has the wrong type of ID, see if you can find a second-order widget that will “convert” it to the right type.</p>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="higher-order-widgets.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ex-political-economy.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tarakc02/discodocs/edit/master/45-non-entity-widgets.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
},
"search": true
});
});
</script>

</body>

</html>

--- 
title: "Documentation for the discoveryengine"
site: bookdown::bookdown_site
output: bookdown::gitbook
documentclass: book
github-repo: cwolfsonseeley/discodocs
description: "Some documentation for the discoveryengine"
knit: "bookdown::render_book"
---

# Welcome

Placeholder


## Contribute to the Disco Engine
## Contribute to this documentation

<!--chapter:end:index.Rmd-->


# (PART) Preliminaries {-}
# What is the Disco Engine? {#what-is-disco}

Placeholder


## Vocabulary and Grammar
## Facilitating discovery

<!--chapter:end:005-what-is-disco.Rmd-->

# Introduction to R and RStudio {#r-intro}

The discoveryengine works best when used with RStudio. Watch this video for a quick tour around RStudio:

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/O-CSMq2jBAM?rel=0" frameborder="0" allowfullscreen></iframe>

<!--chapter:end:01-intro-r.Rmd-->


# Installation {#installation}

Placeholder


## Required packages
## A disco test

<!--chapter:end:02-installation.Rmd-->


# (PART) Basics {-}
# An introductory example {#intro-example}

Placeholder


## Develop a strategy
## Create the definition {#intro-example-create-def}
## Send the definition to the CDW

<!--chapter:end:03-intro-example.Rmd-->


# Working with widgets {#working-with-widgets}

Placeholder


## Finding widgets {#working-with-finding-widgets}
## Leveraging autocomplete {#working-with-autocomplete}
## Codes and synonyms {#working-with-codes-synonyms}
## Synonym search {#synonym-search}
## Use the default cases {#use-defaults}
## The `not()` operator {#widget-not-operator}
## Detailed controls {#detailed-controls}

<!--chapter:end:04-working-with-widgets.Rmd-->


# Combining widgets {#combining-widgets}

Placeholder


## Example

<!--chapter:end:05-combining-widgets.Rmd-->


# (PART) Bots {-}
# The Brainstorm Bot {#brainstorm-bot}

Placeholder


## Search features

<!--chapter:end:30-brainstorm-bot.Rmd-->


# The Matrix Bot {#matrix-bot}

Placeholder


## Introduction
## What it is
## Example
## Botstrapping
## How does it work?

<!--chapter:end:31-matrix-bot.Rmd-->


# (PART) Advanced {-}
# Higher order widgets {#higher-order-widgets}

Placeholder


## Children of wealth

<!--chapter:end:40-higher-order.Rmd-->


# Non-entity widgets {#non-entity-widgets}

Placeholder


## Motivation
## Disco Definition Types {#non-entity-disco-definition-types}
## Searching fund text
## From funds to entities
## "Converters" {#non-entity-converters}

<!--chapter:end:45-non-entity-widgets.Rmd-->


# Optional arguments {#optional-arguments}

Placeholder


## Event invitees and attendees {#opt-events}
## Date ranges
## Graduate, undergraduate, attendee
## Workarounds: inactive only

<!--chapter:end:50-optional-arguments.Rmd-->


# (PART) Related tools {-}
# Add-on packages {#add-on-packages}

Placeholder


## `discoappend`
## `discovcr`
## `discoscape`

<!--chapter:end:70-add-on-packages.Rmd-->


# (PART) Examples {-}
# Political economy list {#ex-political-economy}

Placeholder



<!--chapter:end:80-example-01.Rmd-->


# LYBUNTs {#ex-lybunt}

Placeholder



<!--chapter:end:80-example-02.Rmd-->


# Recent Band Parents {#ex-recent-band-parents}

Placeholder


## Recent band members
## Find their parents
## Who live close enough
## How many?
## Householding

<!--chapter:end:80-example-03.Rmd-->


# Nearing Builder of Berkeley Status {#ex-near-builder}

Placeholder


## Defining close
## Householding

<!--chapter:end:80-example-04.Rmd-->

# Donors who aren't degreeholders {#ex-sim-donors}

```{r ex-sim-donors-loadlib, message = FALSE}
# i always begin by loading the disco engine if it isn't already loaded
library(discoveryengine)
```

We have what looks like an easy request:

> Find donors to the School of Information who are not SIM degree holders.

Having already looked up the codes, you immediately think: 

```{r eval = FALSE}
gave_to_area(SIM) %but_not% has_degree_from(LI)
```

Unfortunately, as you begin reviewing the results, you notice that you produced a list that includes spouses of degree holders who received credit for household gifts to SIM. 

To get around the issue, use the `married_to` widget (a [higher-order widget](#higher-order-widgets)). Note the use of parentheses to ensure the correct interpretation:

```{r}
alum = has_degree_from(LI)
non_alum_donor = 
    gave_to_area(SIM) %but_not%
    (alum %or% married_to(alum))
```

<!--chapter:end:80-example-05.Rmd-->


# Utilizing FEC disclosure data {#ex-fec}

Placeholder


## Basics
## Example: Engineering Prospects
## Example: Environmental Interest
## Bots

<!--chapter:end:80-example-06.Rmd-->


# Utilizing CA campaign finance data {#ex-ca-campaign}

Placeholder


## Example: State Senate and Assembly candidates
## Propositions

<!--chapter:end:80-example-07-ca-campaign.Rmd-->


# Alumni and current students {#ex-academic}

Placeholder



<!--chapter:end:80-example-07.Rmd-->


# Mining SEC filings {#ex-sec}

Placeholder


## Basics
## Looking for companies
## Specific roles

<!--chapter:end:80-example-08-sec.Rmd-->


# Finding dual-degree holders {#ex-mba-dual}

Placeholder


## Why not `%but_not%`?

<!--chapter:end:80-example-09-mba-dual.Rmd-->


# Moves Management {#ex-moves-management}

Placeholder


## Basics
## Example: Engineering qualifications
## Example: collaborative asks

<!--chapter:end:80-example-10-proposals.Rmd-->


# (APPENDIX) Appendix {-}
# Test your database set up {#test-cdw}

Placeholder


## Test your connection
## Opening RStudio
## Testing getcdw

<!--chapter:end:90-test-cdw.Rmd-->

# Cheat Sheet {#cheat-sheet}

If you're looking for help installing the discovery engine, head over to the [installation guide](https://cwolfsonseeley.github.io/discodocs/installation.html). If you've previously installed the discovery engine, but need to update to the latest version, check the [instructions for updating](https://cwolfsonseeley.github.io/discodocs/updating.html).

## General

* Always start a session with `library(discoveryengine)`

```{r cheat-sheet-loadlib}
library(discoveryengine)
```

* Use `show_widgets()` for help [finding the right widget](#working-with-finding-widgets).
* When in doubt, use the [brainstorm bot](#brainstorm-bot). For instance if you are looking for people who played on the basketball team, type `brainstorm_bot("basketball")`
* Multiple widgets [can be combined](#combining-widgets) using the operators `%and%`, `%or%`, or `%but_not%`. 
* Be aware of the [add-on packages](#add-on-packages) for outputting additional data and improving your disco engine experience.
* Use the documentation. For instance, type `?has_affiliation` to understand how to use the `has_affiliation` widget.

## Output

Use `display` for output. Recall that you can use the equals sign `=` to assign names to your disco engine definitions, to make it easier to refer to them when `display`ing or doing other operations:

```{r cheat-sheet-output-1}
basketball_player = played_sport(basketball_men, basketball_women)
display(basketball_player)
```

If instead of just viewing IDs on the screen, you'd like to export them (perhaps to use in a CADS savedlist), just add a filename: `display(basketball_player, file = "basketball-players")` and a file called "basketball-players.csv" will appear in your working directory. *Note that the exported file has a header, so when you upload it to an Advance savedlist, make sure to check the "First row is a header" box.*

## Code lookup

Most widgets rely on the coding found in CADS for their input, but you probably haven't memorized all of the codes! By using a question-mark inside of a widget, you can do look-ups on the fly:

```{r cheat-sheet-lookup}
gave_to_department(?band)
```

Codes (such as `CALBAND`) and synonyms (such as `cal_band`) can be used interchangeably, so use whichever feels more comfortable. 

## Text search

Though most widgets rely on codes from CADS as inputs, some utilize text search. Just like the `brainstorm_bot`, which is also based on text search, these widgets require you to use quotation marks around the search term(s). Here are some examples:

* `contact_text_contains("neuro*", "brain")`
* `fund_text_contains("diversity")`
* `research_miner("underrepresented")`

**Note:** The `brainstorm_bot` will help you find things through the code tables, but it will not do big text searches of things like contact reports, fund biographies/terms, and research profiles. For that kind of specialized search, you should use these text search based widgets.

## Other

Type `show_suspect_pools()` to view a list of all Suspect Pools, which is useful in conjunction with the `in_suspect_pool` widget.

<!--chapter:end:93-cheat-sheet.Rmd-->


# How does it work? {#how-it-works}

Placeholder


## A Widget as a SQL template
## A template as a data structure
## Non-standard evaluation
## Combining simple definitions
### "Atomic" vs. "Complex" definitions
### Operations on definitions
## Re-visiting `to_sql`
## Seeing it all in action
## For further study

<!--chapter:end:99-how-does-it-work.Rmd-->

